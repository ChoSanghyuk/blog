# [토비의 스프링] 4장. 예외



"토비의 스프링 3.1" 4장 예외 단원을 읽고 정리한 글입니다.



## 들어가며



예외 처리는 java 프로그래밍을 하면서 바로 접하는 문제이지만, 잘 처리하는 것은 번거롭고 어려운 일이다. 이번 단원에서는 예외 처리의 핵심 원칙과 예외의 종류, 그리고 처리 전략에 대해서 다루고 있다.

예외 처리에 있어야 명심해야할 핵심 원칙은 **모든 예외는 적절하게 복구**되거나 **작업을 중단시키고 개발자나 운영자에게 분명하게 통보**돼야 한다는 것이다. 예외 처리를 할 때 가장 실수하는 부분이 무의미하게 예외 처리를 하는 것이다. 예를 들어, 예외를 잡고서 아무것도 수행하지 않거나 무의미하고 무책임한 throws를 남발한다면 예외 처리를 했다고 할 수 없다.





## 예외의 종류와 특징

자바에서 throw를 통해 발생시킬 수 있는 예외는 크게 2가지가 있다.



첫번째는 **Error** 타입이다.

java.lang.Error 클래스의 서브클래스로, 시스템에 뭔가 비정상적인 상황이 발생했을 경우 사용된다. 주로 자바 VM에서 발생시키며, 시스템 레벨의 처리 필요하기 때문에 애플리케이션 코드에서 처리하지 않는 예외 타입이다. 대표적인 예시로는 OutOfMemoryError, ThreadDeath가 있다.



두번째는 **Exception** 타입이 있다.

java.lang.Exception의 서브클래스로 정의되며, 개발자가 작성한 애플리케이션 코드의 작업 중에 예외 상황이 발생했을 경우 사용된다.  이 Exception 타입은 다음 2가지로 분류할 수 있다. 

먼저 **체크 예외**이다.

체크 예외는 Exception 클래스의 서브클래스이면서, RuntimeException 클래스를 상속하지 않는 클래스이다. 예외 처리를 강제하는 예외이며, 일반적인 상황에서 예외라고 부를 때 나타내는 것이다. 대표 예시로는 SQLException이 있다. 

다른 하나는 **언체크 예외**이다.

RuntimeException 클래스를 상속하는 클래스로, 명시적인 예외처리를 강제하지 않는 예외이다. 대표 예시로는 NullPointerException, IllegalArgumentException가 있다. 

![image-20230726084437676](04.예외.assets/image-20230726084437676.png)

[그림 4-1] Exception의 두 가지 종류



## 예외 처리 방법

예외를 처리하는 방법에는 3가지가 있다.

첫번째로 예외를 **복구**하는 방법이 있다. 예외 상황을 파악하고 문제를 해결하여 정상 상태로 복구하는 방식이다. 다른 작업 흐름으로 자연스럽게 유도하거나 재시도를 통해서, 본래의 작업 흐름을 이어나가는 것이다.

예를 들어, DB Connection 문제로 에러가 발생했을 때, Connection을 다시 연결하고 본래의 로직을 다시 수행하도록 처리할 수 있다.



두번째로는 예외처리를  **회피**하는 것이다. 예외의 처리를 자신이 담당하지 않고 자신을 호출한 쪽으로 던져버리는 것으로 `throws`를 사용하는 것이다. 주의할 점은 긴말하게 역할을 분담하고 있는 관계가 아니라면 무책임한 회피일 수 있다는 것이다. 예외를 회피하는 것 또한 복구하는 것처럼 의도가 분명해야 한다. 

예를 들어, 3장에서 살펴본 템플릿-콜백 관계에서는 콜백이 SQLException을 처리하지 않고, 템플릿에 던져버렸었다. 이처럼 예외 회피는 긴밀하고 분명한 역할 구분이 있는 관계에서 사용되어야 한다.



세번째로는  예외를 **전환**하는 것이다. 























## Spring JDBC 예외 처리 전략 - DataAccessException 

