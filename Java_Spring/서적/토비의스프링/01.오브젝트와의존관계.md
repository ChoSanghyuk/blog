# 1장. 오브젝트와 의존관계



"토비의 스프링 3.1"을 읽고서 내용을 정리한 글입니다. 

잘못된 사례부터 시작하여, 점차 코드를 개선해 나가며 내용을 설명했던 본래 글과 다르게, 해당 장에서 반복적이고 공통적으로 등장하는 주제들을 내용 중심으로 정리하고자 합니다.



## 들어가며

해당 장은 객체 지향적인 설계를 할 때, 오브젝트들과 오브젝트들의 의존 관계를 어떻게 설계하면 좋을지에 관한 내용을 다루고 있다. 

객체 지향적 설계 원칙 중 **단일 책임 원칙**에 따르면 객체는 하나의 관심사에 집중되어야 한다. 하지만 대규모 프로그램을 설계하면, 객체들은 독립적으로 자신의 관심사를 수행하는 것이 아닌, 다른 객체들과의 관계(의존)를 통해서 수행하는 경우가 자주 존재한다. 하지만 이러한 관계 또한 하나의 관심사로써, 객체 내에서 **직접적인 의존관계를 가지는 것은 자신의 핵심 관심사 외의 다른 관심사를 가지는 것**이다. 

의존관계가 필수인 상황에서, 어떻게 스프링은 객체들이 핵심 관심사에 집중할 수 있게 만들어 주는지가 이 장의 핵심 내용이다. 



## 관심사의 분리

- 장점

  - 변화의 폭을 최소한으로 줄여주는 것
  - 분리와 확장을 고려한 설계
  - 변화는 대체로 집중된 한 가지 관심에 대해 일어남
  - 관심이 같은 것끼리는 모으고, 관심이 다른 것은 따로 떨어져 있게 하는 것

- 방법

  - 상속을 통한 확장

    - 클래스 계층구조를 통해 두 개의 관심이 독립적으로 분리되면서 변경 작업 용이
    - 템플릿 메소드 패턴
    - 팩토리 메소드 패턴
    - 한계
      - 다중상속 X, (상하위 클래스끼리 ) 두 가지 다른 관심사에 대해 긴밀한 결합

  - 인터페이스의 도입

    - 다형성을 통한 인터페이스 타입으로 참조

      - 클래스 사이의 관계는 코드에 다른 클래스 이름이 나타나기 때문에 생성

        =>  인터페이스 타입으로 참조 시, 느슨한 관계

      - 런타임 시점에는 모델링 시에 없었던(관계가 보이지 않던) 관계가 생성

    - 전략 패턴
      - 자신의 기능 맥락에서 필요에 따라 변경이 필요한 알고리즘을 인터페이스를 통해 통째로 외부로 분리



제어의 역전

- 제어권의 이전을 통한 제어관계 역전

  - 프로그램의 제어 흐름 구조가 뒤바뀌는 것


  - **능동적 주체 => 수동적 주체**

  - 모든 오브젝트가 능동적으로 자신이 사용할 클래스를 결정, 언제/어떻게 그 오브젝트를 만들지를 스스로 관장

    => 모든 제어 권한을 자신이 아닌 다른 대상에게 위임

- 라이브러리 vs 프레임워크

- 스프링의 IoC

  - 

  





















