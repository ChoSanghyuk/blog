# String 타입 Date 및 Timestamp 타입으로 변경하기



Java 코드를 통해서 DB 작업을 수행하다 보면, String 타입과 DB 날짜 타입간 호환이 필요할 때가 있다.

`String`, `java.sql.Date`, `java.sql.Timestamp` 타입들에 대해서 상호간 타입 변경 방법에 대해서 정리하고자 한다



## String => java.sql.Date 



java.sql.Date 클래스는 `valueOf`라는 스태틱 메소드를 통해서 **yyyy-MM-dd** 포맷의 문자열을 java.sql.Date 타입으로 변환해준다. (이때 포맷에서 달과 요일의 경우,  한 자리인 경우에는 0을 생략하고 한자리로만 작성하여도 무방하다.)

```java
public static Date valueOf(String s)
```

그렇기 때문에 우리는 주어진 문자열을 어떻게 하면 yyyy-MM-dd 포맷으로 변경해야 할지에 대해서만 고민을 하면 된다.



포맷을 맞추는 가장 대표적으로 사용되는 방식은 `java.text.SimpleDateFormat` 객체를 통해 parsing 후 formatting 작업을 수행하는 것이다. `SimpleDateFormat`는 formatting (date → text)과 parsing (text → date)에 사용되는 클래스로, 어떠한 사용자 정의된 패턴들도`java.util.Date` 타입과 상호 변환 가능하게 해준다. 이를 소스로 구현하면 다음과 같다.

```java
String sampleDate = "2023/09/05 23:22:11";

// 입력될 문자열의 포맷을 지정
SimpleDateFormat parser = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
// 결과로 도출될 문자열의 포맷을 지정
SimpleDateFormat output = new SimpleDateFormat("yyyy-MM-dd");
// parse : 문자열 => java.util.Date  format : java.util.Date => 문자열
java.sql.Date date = Date.valueOf(output.format(parser.parse(sampleDate))); 

System.out.println(date.toString()); // 2023-09-05
```



:bulb: `SimpleDateFormat`의 패턴 글자

| Letter | Date or Time Component                           | Presentation       | Examples                                    |
| ------ | ------------------------------------------------ | ------------------ | ------------------------------------------- |
| `G`    | Era designator                                   | Text               | `AD`                                        |
| `y`    | Year                                             | Year               | `1996`; `96`                                |
| `Y`    | Week year                                        | Year               | `2009`; `09`                                |
| `M`    | Month in year (context sensitive)                | Month              | `July`; `Jul`; `07`                         |
| `L`    | Month in year (standalone form)                  | Month              | `July`; `Jul`; `07`                         |
| `w`    | Week in year                                     | Number             | `27`                                        |
| `W`    | Week in month                                    | Number             | `2`                                         |
| `D`    | Day in year                                      | Number             | `189`                                       |
| `d`    | Day in month                                     | Number             | `10`                                        |
| `F`    | Day of week in month                             | Number             | `2`                                         |
| `E`    | Day name in week                                 | Text               | `Tuesday`; `Tue`                            |
| `u`    | Day number of week (1 = Monday, ..., 7 = Sunday) | Number             | `1`                                         |
| `a`    | Am/pm marker                                     | Text               | `PM`                                        |
| `H`    | Hour in day (0-23)                               | Number             | `0`                                         |
| `k`    | Hour in day (1-24)                               | Number             | `24`                                        |
| `K`    | Hour in am/pm (0-11)                             | Number             | `0`                                         |
| `h`    | Hour in am/pm (1-12)                             | Number             | `12`                                        |
| `m`    | Minute in hour                                   | Number             | `30`                                        |
| `s`    | Second in minute                                 | Number             | `55`                                        |
| `S`    | Millisecond                                      | Number             | `978`                                       |
| `z`    | Time zone                                        | General time zone  | `Pacific Standard Time`; `PST`; `GMT-08:00` |
| `Z`    | Time zone                                        | RFC 822 time zone  | `-0800`                                     |
| `X`    | Time zone                                        | ISO 8601 time zone | `-08`; `-0800`; `-08:00`                    |





## String => java.sql.Timestamp

String 타입을 `Timestamp` 변경하는 방식은 앞선 Date때와 동일하다. 

java.sql.Timestamp클래스는 `valueOf`라는 스태틱 메소드를 통해서 **yyyy-MM-dd hh:mm:ss.fffffffff** 포맷의 문자열을 java.sql.Date 타입으로 변환해준다.



`Timestamp` 클래스 또한 `valueOf` 스태틱 메소드를 통해서 문자열을 `Timestamp` 타입으로 변경하는 것을 지원하고 있으며, 앞과의 차이점은 문자열 포맷일 뿐이다. `Timestamp.valueOf`가 인자로 받는 문자열의 타입은 











https://docs.oracle.com/javase/8/docs/api/java/sql/Date.html#valueOf-java.time.LocalDate-

https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html