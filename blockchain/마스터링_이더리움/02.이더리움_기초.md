# [마스터링 이더리움] 2장. 이더리움 기초



본 포스트는 서적 *마스터링 이더리움*의 2장 *이더리움 기초* 파트를 정리한 포스트입니다. 해당 파트에서 소개되는 메타마스크 실습 내용은 제외하고, 개념적인 부분만 정리하였습니다.



## 이더 화폐 단위



이더리움의 화폐 단위는 이더(ether)라고 불린다. 흔히 실수하지만 이더리움은 시스템을 의미하며, 이더가 화폐이다. 이더는 ETH 또는   Ξ,  ♦와 같은 기호로도 표기 가능하다.

이더는 웨이(wei)라는 가능한 가장 작은 단위까지 세분화된다. 1이더는 10^18 wei이며, 이더의 가치는 항상 이더리움 내부에서 웨이로 표시된 부호 없는 정숫값으로 표현가능하다.



## 이더리움 지갑



지갑이라는 용어는 많은 것을 의미하지만, 여기서는 **지갑 이더리움 계정을 관리하는데 도움이 되는 소프트웨어 애플리케이션**이라는 의미로 사용할 것이다. 지갑은 사용자의 키를 보유하고, 사용자를 대신해 트랜잭션을 생성하고, 브로드캐스트(broadcast)할 수 있다. 

이더리움 지갑은 기능과 디자인이 다양하다. 지갑을 선택을 할 때 주의할 점은 집간은 개인키에 대한 접근 권한을 가지므로, 신뢰하는 소스에서 지갑 애플리케이션을 다운받아서 사용하는 것이다. (일반적으로 인기가 높은 지갑일 수록 더 신뢰할 수 있다.) 추천할 만한 스타터 지갑으로는 메타마스크(MetaMask), 잭스(Jaxx), 마이이더월렛(MyEtherWallet), 에메랄드 지갑(Emerald Wallet)이 있다.



### 통제와 책임

이더리움 지갑은 계정을 관리하는데 도움을 주지만, 계정을 관리하고 제어하는 것에 대한 책임은 각 개인에게 있다. 이더리움의 탈중앙화된 시스템의 중요한 측면 중 한 가지로 이더리움의 각 사용자가 자금 및 스마트 컨트랙트에 대한 접근을 제어하는 자체 개인키를 관리하고 제어할 수 있어야 한다는 것이다. (하나의 개인키는 하나의 계정과 동일하게 여길 수 있음) 개인키를 분실하면 자금 및 컨트랙트에 대한 권한을 잃게 됨으로 개인키 관리에 각별한 주의가 필요하다.

개인키를 관리하는 팁을 몇가지 소개하겠다.

- 검증된 표준 접근 방식 사용
- 중요한 계정일수록 더 높은 보안 조치 
- 최고 수준의 보안이 필요한 경우, 에어 갭이 있는 장치 사용
- 개인키를 플레인 형태(plain form)로, 특히 디지털 형식으로 저장하지 말 것
- 개인키는 암호화된 형식으로 디지털 '키스토어(keystore)' 파일로 저장할 수 있다. 
- 패스워드를 디지털 문서, 온라인 드라이브, 암호화된 PDF 등에 저장하지 말고 사진(보통 스크린샷)으로 찍어서 보관해두지도 마라. 패스워드 관리자를 사용하거나 종이에 적어라.
- **뉴모닉은 펜과 종이를 이용해서 적어두어라 (백업 필수!!)**
- 큰 돈을 보내기 전에(특히 처음 보내는 주소로), 꼭 적은 양(약 1000원 정도)을 먼저 보내고 수령확인이 되면 나머지 금액을 보내라.
- 새 계정을 만들 때 새 주소로 작은 테스트 트랜잭션만 보내는 것으로 시작하라
- 공개 블록 탐색기 (블록 익스플로러)는 트랜잭션이 네트워크에 받아졌는 지 독립적으로 확인할 수 있는 방법이다. (다만, 사용자를 누구나 추적할 수 있기 때문에 자신의 주소를 드러내게 됨)



## 이더리움 계정



이더리움 계정에는 개인키를 가지고 있는 **외부 소유 계정**과 스마트 컨트랙트 코드가 있는 **컨트랙트 계정**이 있다.



### 외부 소유 계정(Externally Owned Account, EOA)

개인키가 있는 계정으로, 자금 또는 컨트랙트에 대한 접근을 제어한다. 고유 주소가 있으며, 이더를 보내고 받을 수 있다. 또한 외부 소유 계정만이 트랜잭션을 시작(initaite)할 수 있다.



### 컨트랙트 계정(contract account) 

단순한 EOA가 가질 수 없는 스마트 컨트랙트 코드를 가지고 있다. 스마트 컨트랙트 코드는 계정 생성 시 이더리움 블록체인에 기록되고 EVM에 의해 실행되는 소프트웨어 프로그램을 의미한다. 컨트랙트 계정은 개인키를 가지고 있지 않은 대신 스마트 컨트랙트의 코드의 로직으로 제어한다.

컨트랙트 계정 또한 고유 주소가 있으며, 해당 주소를 통해 스마트 컨트랙트를 실행할 수 있다. 트랜잭션 목적지가 컨트랙트 주소일 때 트랜잭션과 트랜잭션 데이터를 입력으로 사용하여 컨트랙트가 EVM에서 실행된다. 트랜잭션에는 실행할 컨트랙트의 특정 함수와 해당 함수에 전달할 파라미터를 나타내는 데이터(data)가 포함될 수 있다. 

컨트랙트 등록은 목적지 주소가 제로 어드레스(0x0000000000000000000000000000000000000000)인 특수 트랜잭션을 만드는 것으로 가능하다. 제로 어드레스는 컨트랙트를 등록하고자 하는 이더리움 블록체인에 알리는 특별한 주소이다. 컨트랙트가 블록체인에 생성되면 컨트랙트 계정은 이더리움 주소를 갖게 된다

컨트랙트 계정은 개인키가 없으므로 트랜잭션을 시작할 순 없다. 다만, 실행 경로를 구축하여 다른 컨트랙트를 호출해서 컨트랙트에 반응(react)할 수 있다. 이를 사용한 대표적인 방법으로, 다중 서명 스마트 트랜잭션 지갑에 지급요청 트랜잭션을 전송하는 것이 있다.
