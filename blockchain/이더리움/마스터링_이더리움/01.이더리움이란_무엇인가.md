# [마스터링 이더리움] 1장. 이더리움이란 무엇인가?



본 포스트는 서적 마스터링 이더리움의 1장 이더리움이란 무엇인가 파트를 정리한 포스트입니다.



## 이더리움 소개



### 개요

이더리움은 스마트 컨트랙트라는 프로그램을 실행하는 오픈 소스에 기반을 둔, 전 세계에 걸쳐 탈중앙화된 컴퓨팅 인프라스트럭처이다. 이더리움은 **튜링 완전** 언어로, 임의성과 무한 복잡성을 가진 코드를 실행할 수 있는 **가상 머신**을 운영한다.

이더리움은 이더(Ether)라고 하는 암호화폐를 이용하여 실행 자원 비용을 측정하고 제한한다. 이더의 사용 목적은 월드 컴퓨터로서의 이더리움 플랫폼 사용료를 지불하기 위한 유틸리티 화폐이다. 



### 비트코인과의 비교

비트코인은 트랜잭션이 **상태 전이**(state transition)를 일으켜 코인의 소유권을 변경하는 탈중앙화된 합의 **상태 머신**(state machine)으로 볼 수 있다. 비트코인은 스크립트 언어가 지불 조건에 대한 단순한 참/거짓 평가에만 제한되어 있으며, 화폐 소유 상태만 추적한다.

이더리움 또한, 탈중앙화된 합의 **상태 머신**이지만, 범용 데이터 저장소 **키-밸류 튜플**로 표현할 수 있는 모든 데이터를 저장할 수 있다. 이를 통해서 상태 머신에 코드를 로드하고, 그 코드를 실행하고, 그 결과 상태를 저장할 수 있다. 



### 일반적인 범용 컴퓨터와의 비교

이더리움은 범용 컴퓨터 (특정한 목적을 위해서 따로 설계된 것이 아니라 여러 가지 업무를 모두 처리할 수 있도록 만들어진 컴퓨터)와 비슷한 성질을 가지고 있지만, 중요한 두가지 차이가 있다. 첫번째로는 이더리움의 상태 변화가 합의 규칙에 의해 관리된다는 것이며 두번째로 상태가 전체적으로 배포된다는 점이다.

다시 말해, 이더리움은 임의의 상태를 추적하고 상태 머신을 프로그래밍하여 합의로 작동하는 월드-와이드 컴퓨터라고 정의할 수 있다.



## 이더리움의 구성 요소



이더리움의 구성요소로는 다음과 같이 존재한다.

- 피어투피어 네트워크 (P2P network)
- 합의 규칙
- 트랜잭션
  - 보낸 사람, 받는 사람, 값, 데이터 페이로드가 포함된 네트워크 메시지를 의미한다.
- 상태 머신
  - 이더리움 상태 전이는 바이트코드를 실행하는 EVM(Ethereum Virtual Machine)에 의해 처리된다.
- 데이터 구조
  - 머클 패트리샤 트리(Merkle Patricia Tree)라고 하는 시리얼라이즈된 해시 데이터 구조로, 각 노드의 데이터베이스에 저장된다.
- 합의 알고리즘
- 경제적 보안성 (economic security)
- 클라이언트
  - 클라이언트 소프트웨어를 상호운용할 수 있는 몇 가지 구현체를 가진다. (ex. Geth, Parity)



## 튜링 완전과 가스



### 튜링 완전

방금 전에 이더리움은 **튜링 완전** 언어라고 소개하였었다. 튜링 완전하다는 것은 기능적인 의미로, 어떠한 복잡한 프로그램이라도 계산할 수 있음을 뜻한다. 

이러한 유연성은 보안과 자원 관리에 몇 가지 어려운 문제를 야기한다. 예를 들어, 튜링 완전 시스템은 무한 루프에서 실행될 수 있다. 이는 노드가 유효성 검사를 시도할 때, 우연히 또는 의도적으로 스마트 컨트랜트가 영원히 지속하도록 만들 수 있으며, 이는 사실상 서비스 거부(Denial Of Service) 공격이다.

이에, 이더리움은 스마트 컨트랙트가 사용하는 자원을 제한할 필요성이 생긴다.



### 가스(gas)

이더리움은 자원을 제한하기 위해 **가스**(gas)라는 과금 매커니즘 도입하였다. 가스는 각 실행되는 명령어의 비용을 일일이 계산한다. 스마트 컨트랙트를 실행시킬 때 트랜잭션은 스마트 컨트랙트를 실행하는 데 사용할 수 있는 가스의 최대 사용량을 가지고 있어야 한다. 계산에 소비되는 가스의 총량이 트랜잭션에서의 가스 가용량을 초과한다면 EVM은 실행을 중지하게 된다. 이를 통해, 이더리움은 각 프로그램이 사용할 수 있는 리소스를 제한한다.

가스는 오직 트랜잭션의 부분 구성요소로서만 구매 가능하며, 이더로만 살 수 있다.



## 탈중앙화 애플리케이션 (DApp)으로의 발전



이더리움은 다양한 용도로 프로그래밍을 할 수 있는 범용적인 블록체인을 만들기 위한 하나의 방법으로 출발했다. 그러나 매우 빠르게 탈중앙화 애플리케이션 (DApp) 프로그래밍을 위한 플랫폼으로 확대되었다.

댑은 최소 구성 요소로만 보자면, 스마트 컨트랙트과 웹 사용자 인터페이스를 합친 것을 의미한다.

좀 더 확대된 의미로서는 공개되고 탈중앙화된 피어투피어 기반 서비스 위에 제공되는 웹 애플리케이션을 의미한다.

