## [Go_Fiber] 02.그룹 라우트 (feat. group, mount)



저번 포스트는 기본적인 라우팅 방식으로, 단일 url 경로에 핸들러 함수를 매핑시켰다.

Go Fiber에서는 url의 트리 구조에 맞게 group을 지정하며 url를 지정할 수 있게 해준다.



## Group

우선, `Group` 메소드는 url의 선행 경로를 가지는 라우트 객체를 반환한다. 반환된 라우트 객체에서 라우팅을 지정할 경우, 모두 경로 앞에 해당 선행 경로를 가지게 된다.

```go
func (app *App) Group(prefix string, handlers ...Handler) Router
```

- `prefix string` : 핸들러들 앞에 공통으로 지정할 선행 경로를 작성한다.
- `handlers ...Handler` : 그룹 내의 모든 경로에 대해 공통적으로 적용되는 미들웨어들을 지정한다.



### 예시 코드

```go
func GroupRoute(app *fiber.App) {

	api := app.Group("/api", middleware) // /api로 시작되는 모든 url에 요청이 올 시, 실행되는 미들웨어 지정

	v1 := api.Group("/v1")   // /api/v1
	v1.Get("/list", handler) // /api/v1/list
	v1.Get("/user", handler) // /api/v1/user

	v2 := api.Group("/v2")   // /api/v2
	v2.Get("/list", handler) // /api/v2/list
	v2.Get("/user", handler) // /api/v2/user

	log.Fatal(app.Listen(":3000"))

}
```

```go
func middleware(c *fiber.Ctx) error {
	log.Println("I am a middleware")
	return c.Next()
}

func handler(c *fiber.Ctx) error {
	return c.SendString(c.OriginalURL())
}
```



